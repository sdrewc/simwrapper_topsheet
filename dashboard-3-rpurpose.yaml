header:
  tab: "Travel Purpose"
  title: "Travel Purpose"
  description: ""


layout:
  time_of_day:
    - type: text
      title: 'San Francisco Resident Trips Purpose Table by Time of the Day' #to be changed to SF
      description: 'Table showing trips by primary destination purpose statistics for 5 different times of the day including Daily aggeragate'
      file: 'topsheet/purpose_tod.md'
    - type: "line"
      title: "Bay Area Trips by Primary Destination Purpose and Time Of Day"
      description: 'Graph showing trips by primary destination purpose statistics for 5 different times of the day'
      props:
        dataset: "topsheet/purpose_tod.csv"
        x: "TOD"
        columns: [ 'Work', 'School','Escort','Personal Business & Medical','Shopping','Meals','Social & Recreational','Change Mode','Return Home']
        xAxisName: 'Time of the Day'
        yAxisName: 'Count of trips'
  district:
    - type: text
      title: 'Bay Area Daily Trips Purpose Table by Primary Destination'
      description: 'Table showing statistics for 15 districts trips by primary destination purpose statistics'
      file: 'topsheet/purpose_dist_daily.md'
    - type: plotly
      title: 'SF Daily Trip Purpose Plot'
      description: 'Graph showing statistics for 12 districts trips by primary destination purpose statistics'
      datasets: 
        data: 'topsheet/purpose_all.csv'
      traces:
        - type: bar
          name: Work
          y: $data.Districts
          x: $data.Work
          orientation: h
        - type: bar
          name: School
          y: $data.Districts
          x: $data.School
          orientation: h
        - type: bar
          name: Escort
          y: $data.Districts
          x: $data.Escort
          orientation: h
        - type: bar
          name: 'Personal Business & Medical'
          y: $data.Districts
          x: $data.Personal Business & Medical
          orientation: h
        - type: bar
          name: Shopping
          y: $data.Districts
          x: $data.Shopping
          orientation: h
        - type: bar
          name: Meals
          y: $data.Districts
          x: $data.Meals
          orientation: h
        - type: bar
          name: 'Social & Recreational'
          y: $data.Districts
          x: $data.Social & Recreational
          orientation: h
        - type: bar
          name: 'Change Mode'
          y: $data.Districts
          x: $data.Change Mode
          orientation: h
        - type: bar
          name: 'Return Home'
          y: $data.Districts
          x: $data.Return Home
          orientation: h
            
      layout:
        barmode: stack

  taz_maps:
    - type: map
      title: Daily Resident Trips by Purpose by Home TAZ
      zoom: 11
      center:
          - -122.42
          - 37.77
      height: 12
      shapes: ../../shapefiles/Topsheet/TAZ2454_clean.shp
      datasets:
        taz: 
          file: topsheet/taz_rpurpose_h.csv
          join: TAZ:taz
      display:
          fill:
            dataset: taz
            columnName: Work
            normalize: TAZ2454_clean.shp:SQ_MILE
            colorRamp:
              ramp: Plasma
              steps: 10

      tooltip:
        - taz.District
        - taz.taz
        - taz.Work
        - taz.Grade School
        - taz.High School
        - taz.College
        - taz.Workbased
    - type: map
      title: by Origin TAZ
      zoom: 11
      center:
          - -122.42
          - 37.77
      height: 12
      shapes: ../../shapefiles/Topsheet/TAZ2454_clean.shp
      datasets:
        taz: 
          file: topsheet/taz_rpurpose_o.csv
          join: TAZ:taz
      display:
          fill:
            dataset: taz
            columnName: Work
            normalize: TAZ2454_clean.shp:SQ_MILE
            colorRamp:
              ramp: Plasma
              steps: 10

      tooltip:
        - taz.District
        - taz.taz
        - taz.Work
        - taz.Grade School
        - taz.High School
        - taz.College
        - taz.Workbased

    - type: map
      title: by Destination TAZ
      zoom: 11
      center:
          - -122.42
          - 37.77
      height: 12
      shapes: ../../shapefiles/Topsheet/TAZ2454_clean.shp
      datasets:
        taz: 
          file: topsheet/taz_rpurpose_d.csv
          join: TAZ:taz
      display:
          fill:
            dataset: taz
            columnName: Work
            normalize: TAZ2454_clean.shp:SQ_MILE
            colorRamp:
              ramp: Plasma
              steps: 10

      tooltip:
        - taz.District
        - taz.taz
        - taz.Work
        - taz.Grade School
        - taz.High School
        - taz.College
        - taz.Workbased

  district_maps:
    - type: map
      title: Daily Resident Trips by Purpose Map by Home District
      zoom: 11
      center:
          - -122.42
          - 37.77
      height: 12
      shapes: ../../shapefiles/Topsheet/Dist_15_Dissolve.shp
      datasets:
        district: 
          file: topsheet/district_rpurpose_h.csv
          join: DIST:district
      display:
          fill:
              dataset: district
              columnName: Work
              normalize: Dist_15_Dissolve.shp:Shape_Area
              colorRamp:
                  ramp: Plasma
                  steps: 15

      tooltip:
        # - district.District No
        - district.district
        - district.district_name
        - district.Work
        - district.Grade School
        - district.High School
        - district.College
        - district.Workbased

    - type: map
      title: by Origin district
      zoom: 11
      center:
          - -122.42
          - 37.77
      height: 12
      shapes: ../../shapefiles/Topsheet/Dist_15_Dissolve.shp
      datasets:
        district: 
          file: topsheet/district_rpurpose_o.csv
          join: DIST:district
      display:
          fill:
              dataset: district
              columnName: Work
              normalize: Dist_15_Dissolve.shp:Shape_Area
              colorRamp:
                  ramp: Plasma
                  steps: 15

      tooltip:
        # - district.District No
        - district.district
        - district.district_name
        - district.Work
        - district.Grade School
        - district.High School
        - district.College
        - district.Workbased
        
    - type: map
      title: by Destination district
      zoom: 11
      center:
          - -122.42
          - 37.77
      height: 12
      shapes: ../../shapefiles/Topsheet/Dist_15_Dissolve.shp
      datasets:
        district: 
          file: topsheet/district_rpurpose_d.csv
          join: DIST:district
      display:
          fill:
              dataset: district
              columnName: Work
              normalize: Dist_15_Dissolve.shp:Shape_Area
              colorRamp:
                  ramp: Plasma
                  steps: 15

      tooltip:
        # - district.District No
        - district.district
        - district.district_name
        - district.Work
        - district.Grade School
        - district.High School
        - district.College
        - district.Workbased
  tour_time_of_day:
    - type: text
      title: 'SF Resident Tour Purpose Table by Time of the Day'
      description: 'Table showing tours by tour primary destination purpose statistics for 5 different times of the day including Daily aggeragate'
      file: 'topsheet/purpose_tod_tour.md'
    - type: "line"
      title: "Tours by primary destination purpose and Time Of Day"
      props:
        dataset: "topsheet/purpose_tod_tour.csv"
        x: "TOD"
        columns: ['Work','Grade School','High School','College','Escort','Personal Business(including medical)','Social & Recreational','Shopping','Meals']
        xAxisName: 'Time of the Day'
        yAxisName: 'Count of tours'

  tour_district:
    - type: text
      title: 'SF Daily Tours Purpose Table by Primary Destination'
      description: 'Table showing statistics for 15 districts'
      file: 'topsheet/purpose_all_tour.md'
    - type: plotly
      title: 'Daily Tour Purpose plot'
      # description: 'Purpose and their trips in 2 locations'
      datasets: 
        data: 'topsheet/purpose_all_tour.csv'
      traces:
        - type: bar
          name: Work
          y: $data.district
          x: $data.Work
          orientation: h
        - type: bar
          name: Grade School
          y: $data.district
          x: $data.Grade School
          orientation: h
        - type: bar
          name: High School
          y: $data.district
          x: $data.High School
          orientation: h
        - type: bar
          name: College
          y: $data.district
          x: $data.College
          orientation: h
        - type: bar
          name: Escort
          y: $data.district
          x: $data.Escort
          orientation: h
        - type: bar
          name: 'Personal Business(including medical)'
          y: $data.district
          x: $data.Personal Business(including medical)
          orientation: h
        - type: bar
          name: Shopping
          y: $data.district
          x: $data.Shopping
          orientation: h
        - type: bar
          name: Meals
          y: $data.district
          x: $data.Meals
          orientation: h
        - type: bar
          name: 'Social & Recreational'
          y: $data.district
          x: $data.Social & Recreational
          orientation: h
      layout:
        barmode: stack